name: Daily Scrum Generator

# 스케줄과 수동 실행 트리거 추가
on:
  schedule:
    - cron: '15 0 * * *'  # 매일 0시 15분 (한국 시간 기준 9시 15분)
  workflow_dispatch:     # 수동 실행 트리거 추가

jobs:
  create_daily_scrum:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Create Daily Scrum Markdown File
        run: |
          DATE=$(date +"%Y-%m-%d")
          FILE_NAME="daily-scrum-$DATE.md"
          echo "## Team Mission" > $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 당일에 한 작업" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 내일 할 작업" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 미해결 문제" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 기타 사항" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "--------" >> $FILE_NAME
          echo "## Study Log" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 당일에 한 작업" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 내일 할 작업" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 미해결 문제" >> $FILE_NAME
          echo "-" >> $FILE_NAME
          echo "" >> $FILE_NAME
          echo "### 기타 사항" >> $FILE_NAME
          echo "-" >> $FILE_NAME

      - name: Commit and Push
        run: |
          git config --local user.name "github-actions[bot]"
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git add .
          git commit -m "Add daily scrum file for $DATE"
          git push
